<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Bandeali Enterprises Treasure Box Game</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap');
    body { background:radial-gradient(circle at 60% 50%, #283445 0%, #181e27 100%); font-family:'Orbitron',sans-serif; color:white; min-height:100vh; margin:0; padding:0; display:flex; flex-direction:column; align-items:center; user-select:none; text-align:center;}
    #logo { max-width: 160px; margin: 25px auto 10px auto; user-select: none;}
    .header-container { max-width:600px; margin-bottom:10px;}
    .header-container h1 {margin:0;font-size:3rem;color:#fde14b;text-shadow: 0 0 20px #fde14b, 0 0 40px #f8d530;font-weight:900;letter-spacing:6px;}
    .header-container h2 {margin:8px 0 0 0;font-size:2rem;color:#fbe74b;text-shadow:0 0 16px #fbe74b;font-weight:700;letter-spacing:4px;}
    #instructions { font-size:1.25rem; max-width:450px; margin:20px auto 30px auto; color:#eee;}
    #game-container { display: grid; grid-template-columns:repeat(3,1fr); gap:16px 14px; justify-items:center; width:320px; max-width:95vw; min-height:380px; margin-bottom:14px; user-select:none;}
    .box { width:100px; height:130px; background: linear-gradient(145deg, #6b3e00, #3f2400 92%); border:3px solid #fde14b; border-radius:16px; box-shadow:0 0 18px #fde14baa inset,0 3px 10px #000b; font-weight:900; color:#fde14b; font-size:2.8rem; display:flex; flex-direction:column; justify-content:center; align-items:center; cursor:pointer; transition:transform 0.3s ease; outline:none; position:relative;}
    .box.locked { filter:grayscale(1); opacity:0.6; cursor:default;}
    .box.active {border-color:#fff44c; box-shadow:0 0 30px #fff44c inset,0 0 15px #fff44c; transform:scale(1.07);color:#4b3700;}
    .box.opened {background:#fde14b;color:#4b3700;cursor:default;filter:none;opacity:1;box-shadow:0 0 48px #fee452;transform:scale(1.1);}
    .box img {max-width:44px;max-height:44px;margin-bottom:6px;filter:drop-shadow(0 0 6px #c1a834);}
    .box .text {font-size:1rem; user-select:none; text-align:center; line-height:1.2;}
    #spin-button { display:none; margin:0 auto 28px auto; padding:14px 42px; font-size:1.25rem; background:#fde14b; border-radius:28px; border:none; color:#4b3700; cursor:pointer; font-weight:900; box-shadow:0 0 25px #fde14bcc; letter-spacing:4px;}
    #spin-button:hover { background-color:#fff856;}
    #spin-button:active {background-color:#b6951a;color:#fff;}
    #result-message { font-size:1.6rem; min-height:28px; margin-bottom:16px; color:#fde14b; text-shadow:0 0 12px #fde14b;}
    #popup {position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.93);display:none;flex-direction:column;justify-content:center;align-items:center;color:white;font-size:2.25rem;padding:30px;z-index:2000;text-align:center;}
    #popup img {max-width:140px;margin-bottom:28px;}
    #popup .popup-text {margin-bottom:30px;color:#fde14b;font-weight:900;text-shadow:0 0 22px #fde14b;}
    #popup .popup-follow-row { display: flex; align-items: center; gap: 14px; justify-content: center; margin-bottom: 16px;}
    #popup #follow-btn { 
      padding:14px 32px;
      font-size:1.18rem; 
      border:none; border-radius:8px; font-weight:700;
      display:flex; align-items:center; gap:10px;
      cursor:pointer;
      background:linear-gradient(90deg,#833ab4 0,#fd1d1d 51%,#fcb045 100%);
      color:#fff; transition:filter 0.2s;
      box-shadow: 0 2px 15px #0005;
    }
    #popup #follow-btn:hover { filter:brightness(1.08);}
    /* Neon "I have followed" button */
    #popup #done-follow-btn {
      margin-top: 10px;
      padding: 16px 50px;
      font-size: 1.4rem;
      background: #25d366;
      color: white;
      border: none;
      border-radius: 14px;
      font-weight: 900;
      cursor: pointer;
      letter-spacing: 1.2px;
      box-shadow: 0 0 16px #09f, 0 0 40px #0f9, 0 0 60px #0fc;
      transition: filter 0.3s ease;
    }
    #popup #done-follow-btn:hover {
      filter: brightness(1.3);
    }
    /* Enlarged Claim button */
    #popup #claim-btn {
      margin-top: 24px;
      font-size: 2rem; /* Bigger font */
      padding: 24px 80px; /* Bigger padding */
      background: #b3b3b3;
      border-radius: 40px;
      border: none;
      color: #606060;
      font-weight: 900;
      opacity: 0.8;
      cursor: not-allowed;
      box-shadow: none;
      letter-spacing: 1.5px;
      transition: background 0.2s, color 0.2s, opacity 0.2s, box-shadow 0.2s;
    }
    /* Neon glow animation */
    @keyframes neonGlow {
      0%,100% { box-shadow: 0 0 16px #fff355, 0 0 46px #ffe700, 0 0 66px #fdff00; }
      50% { box-shadow: 0 0 24px #fff44c, 0 0 80px #fae856, 0 0 90px #fffc89; }
    }
    #popup #claim-btn.enabled {
      background: #fde14b !important;
      color: #4b3700 !important;
      cursor: pointer !important;
      animation: neonGlow 2.5s ease-in-out infinite;
      opacity: 1;
      box-shadow: 0 0 11px #fde14b, 0 0 22px #fde14b90;
    }
    #popup #claim-btn:disabled,
    #popup #claim-btn[disabled] {
      background: #b3b3b3 !important; color: #606060 !important; opacity: 0.8 !important; cursor: not-allowed !important; box-shadow: none !important;
    }
    canvas#fireworks { position:fixed; top:0; left:0; width:100vw; height:100vh; pointer-events:none; display:none; z-index:2100;}
    @media (max-width:600px){
      #logo {max-width:110px;margin:25px auto 10px auto;}
      .header-container h1 {font-size:2rem;}
      .header-container h2 {font-size:1.5rem;}
      #instructions {font-size:1.1rem;margin-bottom:28px;padding:0 10px;}
      #game-container {width:290px;gap:10px 7px;}
      .box {width:80px;height:110px;font-size:2.3rem;}
      #spin-button {padding:12px 27px;font-size:1.1rem;}
      #result-message {font-size:1.3rem;margin-bottom:14px;}
      #popup {font-size:1.7rem;padding:20px;}
      #popup img {max-width:100px;margin-bottom:20px;}
      #popup #claim-btn {
        font-size:1.5rem;
        padding:14px 40px;
      }
      #popup #follow-btn {padding:10px 20px; font-size:1rem;}
      #popup .popup-follow-row {gap:8px;}
      #popup #done-follow-btn {
        padding: 12px 40px;
        font-size: 1.1rem;
      }
    }
  </style>
</head>
<body>
  <img id="logo" src="Logo.png" alt="Bandeali Enterprises Logo" />
  <div class="header-container">
    <h1>Bandeali Enterprises</h1>
    <h2>Treasure Box Game</h2>
  </div>
  <div id="instructions">Choose a treasure box below and test your luck!</div>
  <div id="game-container"></div>
  <button id="spin-button">Reveal All</button>
  <div id="result-message"></div>
  <div id="popup" tabindex="-1"></div>
  <canvas id="fireworks"></canvas>
  <script>
    const prizes = [
      { win: true, text: "üî• 10% OFF" },
      { win: false, text: "Better luck!" },
      { win: true, text: "üéÅ 15% OFF" },
      { win: false, text: "Better luck!" },
      { win: true, text: "üí∏ 20% OFF" },
      { win: false, text: "Better luck!" },
      { win: true, text: "üéâ ‚Çπ30 OFF" },
      { win: true, text: "üéß Free Earphones" },
      { win: true, text: "üíµ ‚Çπ50 Cashback" }
    ];
    const gameContainer = document.getElementById('game-container');
    const spinButton = document.getElementById('spin-button');
    const resultMessage = document.getElementById('result-message');
    const popup = document.getElementById('popup');
    const fireworksCanvas = document.getElementById('fireworks');
    const ctx = fireworksCanvas.getContext('2d');
    let selectedIndex = null;
    let boxes = [];
    function shuffle(array) {
      let currentIndex = array.length;
      while (currentIndex !== 0) {
        const randomIndex = Math.floor(Math.random() * currentIndex);
        currentIndex--;
        [array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]];
      }
      return array;
    }
    function createBoxes() {
      gameContainer.innerHTML = '';
      resultMessage.textContent = '';
      selectedIndex = null;
      boxes = [];
      spinButton.style.display = 'none';
      const shuffledPrizes = shuffle([...prizes]);
      for (let i = 0; i < shuffledPrizes.length; i++) {
        const box = document.createElement('div');
        box.className = 'box';
        box.setAttribute('tabindex', '0');
        box.setAttribute('role', 'listitem');
        box.setAttribute('aria-label', 'Treasure box. Click to select.');
        box.dataset.index = i;
        box.innerHTML = `<span>?</span>`;
        box.title = "Click to select this treasure box";
        box.addEventListener('click', onBoxSelect);
        box.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            onBoxSelect.call(box);
          }
        });
        gameContainer.appendChild(box);
        boxes.push({ el: box, prize: shuffledPrizes[i] });
      }
    }
    function onBoxSelect() {
      if (selectedIndex !== null) return;
      selectedIndex = Number(this.dataset.index);
      boxes.forEach((box, idx) => {
        if (idx !== selectedIndex) {
          box.el.classList.add('locked');
          box.el.setAttribute('aria-pressed', 'false');
          box.el.tabIndex = -1;
        } else {
          box.el.classList.remove('locked');
          box.el.setAttribute('aria-pressed', 'true');
          box.el.tabIndex = 0;
          box.el.focus();
        }
      });
      spinButton.style.display = 'block';
      resultMessage.textContent = 'Click "Reveal All" to see the treasure!';
    }
    spinButton.addEventListener('click', () => {
      revealBoxes();
    });
    function revealBoxes() {
      boxes.forEach((box, idx) => {
        box.el.classList.remove('locked');
        box.el.classList.add('opened');
        box.el.tabIndex = -1;
        box.el.innerHTML = '';
        if (box.prize.win) {
          const img = document.createElement('img');
          img.src = 'treasure.png';
          img.alt = 'Treasure box image';
          img.className = 'chest-img';
          box.el.appendChild(img);
          const textDiv = document.createElement('div');
          textDiv.className = 'text';
          textDiv.textContent = box.prize.text;
          box.el.appendChild(textDiv);
        } else {
          const textDiv = document.createElement('div');
          textDiv.className = 'text';
          textDiv.textContent = box.prize.text;
          box.el.appendChild(textDiv);
        }
      });
      spinButton.style.display = 'none';
      showPopup(boxes[selectedIndex].prize);
    }
    function showPopup(prize) {
      popup.innerHTML = `
        <img id="popup-img" src="treasure.png" alt="Treasure Box" />
        <div class="popup-text">${prize.text}</div>
        <div class="popup-follow-row">
          <button id="follow-btn" type="button">
            <span aria-hidden="true" style="display:inline-block; vertical-align:middle;">
              <svg width="30" height="30" viewBox="0 0 448 448" style="display:block" xmlns="http://www.w3.org/2000/svg">
                <defs>
                  <radialGradient id="instaGradient" cx="30%" cy="107%" r="150%" fx="30%" fy="107%">
                    <stop offset="0%" stop-color="#fdf497"/>
                    <stop offset="5%" stop-color="#fdf497"/>
                    <stop offset="45%" stop-color="#fd5949"/>
                    <stop offset="60%" stop-color="#d6249f"/>
                    <stop offset="90%" stop-color="#285AEB"/>
                  </radialGradient>
                </defs>
                <rect rx="90" width="448" height="448" fill="url(#instaGradient)" />
                <circle cx="224" cy="224" r="88" fill="none" stroke="#fff" stroke-width="32"/>
                <circle cx="224" cy="224" r="56" fill="none" stroke="#fff" stroke-width="8"/>
                <circle cx="339" cy="109" r="21" fill="#fff"/>
              </svg>
            </span>
            Follow Us
          </button>
        </div>
        <button id="claim-btn" disabled>Claim</button>
      `;
      if (!prize.win) document.getElementById('popup-img').style.display = 'none';
      popup.style.display = 'flex';
      let followBtn = document.getElementById('follow-btn');
      let claimBtn = document.getElementById('claim-btn');
      followBtn.addEventListener('click', function () {
        window.open('https://www.instagram.com/bandeali_enterprises', '_blank');
        followBtn.style.display = "none";
        let doneBtn = document.createElement('button');
        doneBtn.id = "done-follow-btn";
        doneBtn.innerText = "I have followed";
        document.querySelector('.popup-follow-row').appendChild(doneBtn);
        doneBtn.addEventListener('click', function () {
          claimBtn.disabled = false;
          claimBtn.classList.add('enabled');
          claimBtn.focus();
        });
      });
      claimBtn.addEventListener('click', function () {
        if (claimBtn.disabled) return;
        popup.style.display = 'none';
        stopFireworks();
        createBoxes();
        document.getElementById('instructions').textContent = 'Choose a treasure box below and test your luck!';
      });
      startFireworks();
      popup.focus();
    }
    let fireworks = [];
    let fireworksAnimation;
    class Firework {
      constructor() {
        this.x = Math.random() * fireworksCanvas.width;
        this.y = fireworksCanvas.height + 10;
        this.targetY = Math.random() * fireworksCanvas.height / 2;
        this.vy = -(7 + Math.random() * 3);
        this.exploded = false;
        this.particles = [];
        this.color = `hsl(${Math.random() * 360}, 100%, 60%)`;
      }
      update() {
        if (!this.exploded) {
          this.y += this.vy;
          this.vy += 0.15;
          if (this.vy >= 0) {
            this.exploded = true;
            for (let i = 0; i < 24; i++) {
              const angle = (2 * Math.PI / 24) * i;
              this.particles.push({
                x: this.x,
                y: this.y,
                vx: Math.cos(angle) * (2 + Math.random() * 2),
                vy: Math.sin(angle) * (2 + Math.random() * 2),
                alpha: 1,
                color: this.color,
              });
            }
          }
        } else {
          this.particles.forEach(p => {
            p.x += p.vx;
            p.y += p.vy;
            p.vy += 0.05;
            p.alpha -= 0.02;
          });
          this.particles = this.particles.filter(p => p.alpha > 0);
        }
      }
      draw(ctx) {
        if (!this.exploded) {
          ctx.beginPath();
          ctx.arc(this.x, this.y, 2.5, 0, 2 * Math.PI);
          ctx.fillStyle = this.color;
          ctx.fill();
        } else {
          this.particles.forEach(p => {
            ctx.globalAlpha = p.alpha;
            ctx.beginPath();
            ctx.arc(p.x, p.y, 1.5, 0, 2 * Math.PI);
            ctx.fillStyle = p.color;
            ctx.fill();
            ctx.globalAlpha = 1;
          });
        }
      }
    }
    function startFireworks() {
      fireworksCanvas.width = window.innerWidth;
      fireworksCanvas.height = window.innerHeight;
      fireworks = [];
      fireworksAnimation = setInterval(() => {
        if (fireworks.length < 30) fireworks.push(new Firework());
      }, 200);
      renderFireworks();
      fireworksCanvas.style.display = 'block';
    }
    function stopFireworks() {
      clearInterval(fireworksAnimation);
      fireworks = [];
      ctx.clearRect(0, 0, fireworksCanvas.width, fireworksCanvas.height);
      fireworksCanvas.style.display = 'none';
    }
    function renderFireworks() {
      ctx.clearRect(0, 0, fireworksCanvas.width, fireworksCanvas.height);
      fireworks.forEach(fw => {
        fw.update();
        fw.draw(ctx);
      });
      if (fireworksCanvas.style.display === 'block') {
        requestAnimationFrame(renderFireworks);
      }
    }
    window.addEventListener('resize', () => {
      fireworksCanvas.width = window.innerWidth;
      fireworksCanvas.height = window.innerHeight;
    });
    window.onload = () => {
      createBoxes();
      document.getElementById('instructions').textContent = 'Choose a treasure box below and test your luck!';
    };
  </script>
</body>
</html>
