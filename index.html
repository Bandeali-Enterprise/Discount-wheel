<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Bandeali Enterprises Discount Wheel</title>
  <style>
    html, body {
      margin: 0; padding: 0; height: 100%;
      font-family: Arial, Helvetica, sans-serif;
      background: #000;
      overflow-x: hidden;
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    body::before {
      content: "";
      position: fixed; top: 0; left: 0; right: 0; bottom: 0;
      background: linear-gradient(270deg, #ff4e50, #1fddff, #28a745, #f9d423);
      background-size: 800% 800%;
      animation: gradientBG 20s ease infinite;
      z-index: -2;
    }
    @keyframes gradientBG {
      0% {background-position: 0% 50%;}
      50% {background-position: 100% 50%;}
      100% {background-position: 0% 50%;}
    }
    #particles {
      position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
      pointer-events: none; z-index: -1;
    }
    .particle {
      position: absolute; border-radius: 50%; background: rgba(255,255,255,0.4);
      animation: float 8s infinite;
    }
    @keyframes float {
      from { transform: translateY(110vh) scale(0.6); opacity: 0; }
      20% { opacity: 0.4; }
      70% { opacity: 1; }
      to { transform: translateY(-10vh) scale(1.1); opacity: 0; }
    }

    .wheel-container {
      width: 90vw;
      max-width: 450px;
      aspect-ratio: 1/1;
      position: relative;
    }

    /* SVG Wheel styles */
    svg {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      box-shadow: 0 0 25px rgba(255,255,255,0.3);
      cursor: pointer;
      user-select: none;
    }

    /* Spin animation */
    .spin-transition {
      transition: transform 5s cubic-bezier(0.19, 0.75, 0.54, 0.99);
    }

    .center-button {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 100px;
      height: 100px;
      border-radius: 50%;
      background: white;
      color: #333;
      border: 5px solid #196;
      box-shadow: 0 0 20px #1968;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 1.3rem;
      cursor: pointer;
      user-select: none;
      transition: scale 0.2s ease;
      z-index: 10;
    }
    .center-button:hover {
      background: #196;
      color: #fff;
      scale: 1.1;
    }

    /* Popup fullscreen */
    .popup {
      position: fixed; 
      top: 0; left: 0; 
      width: 100vw; height: 100vh; 
      background: rgba(0,0,0,0.975);
      display: none;
      flex-direction: column;
      justify-content: start;
      align-items: center;
      padding-top: 60px;
      z-index: 1100;
      color: white;
      font-size: 2rem;
      text-align: center;
      overflow: hidden;
    }
    .popup-logo {
      max-width: 180px;
      margin-bottom: 25px;
      user-select: none;
    }
    .popup-text {
      padding: 0 20px;
      font-weight: 700;
      line-height: 1.3;
    }
    .popup button {
      margin-top: 30px;
      padding: 14px 40px;
      font-size: 1.1rem;
      border: none;
      border-radius: 12px;
      background: white;
      color: #196;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 0 10px #fff6;
      user-select: none;
    }
    .popup button:active {
      background: #196;
      color: white;
    }

    #fireworksCanvas {
      position: fixed;
      top: 0; left: 0;
      width: 100vw;
      height: 100vh;
      pointer-events: none;
      z-index: 1101;
    }

    /* Responsive text */
    @media(max-width: 600px) {
      .center-button { width: 80px; height: 80px; font-size: 1rem; }
      .popup { font-size: 1.4rem; }
      .popup-logo { max-width: 140px; margin-bottom: 15px; }
    }
  </style>
</head>
<body>
  <!-- Particles background -->
  <div id="particles"></div>

  <div class="wheel-container">
    <svg id="wheel" viewBox="0 0 420 420" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Discount Wheel">
      <g transform="translate(210,210)">
        <!-- Eight segments each 45 degrees -->
        <path fill="#f44336" d="M0 0 L150 0 A150 150 0 0 1 106.07 106.07 Z" />
        <text x="105" y="30" fill="#fff" font-weight="bold" font-size="17" text-anchor="middle" transform="rotate(22.5 105 30)">üî• 10% OFF<br />(upto ‚Çπ100)</text>

        <path fill="#ff9800" d="M0 0 L106.07 106.07 A150 150 0 0 1 0 150 Z" />
        <text x="65" y="90" fill="#fff" font-weight="bold" font-size="17" text-anchor="middle" transform="rotate(67.5 65 90)">üòî TRY AGAIN</text>

        <path fill="#4caf50" d="M0 0 L0 150 A150 150 0 0 1 -106.07 106.07 Z" />
        <text x="-60" y="90" fill="#fff" font-weight="bold" font-size="17" text-anchor="middle" transform="rotate(112.5 -60 90)">üéÅ 15% OFF<br />(upto ‚Çπ150)</text>

        <path fill="#2196f3" d="M0 0 L-106.07 106.07 A150 150 0 0 1 -150 0 Z" />
        <text x="-110" y="30" fill="#fff" font-weight="bold" font-size="17" text-anchor="middle" transform="rotate(157.5 -110 30)">üí∏ FLAT ‚Çπ20 OFF</text>

        <path fill="#9c27b0" d="M0 0 L-150 0 A150 150 0 0 1 -106.07 -106.07 Z" />
        <text x="-105" y="-50" fill="#fff" font-weight="bold" font-size="17" text-anchor="middle" transform="rotate(202.5 -105 -50)">üéâ 20% OFF<br />(upto ‚Çπ200)</text>

        <path fill="#00bcd4" d="M0 0 L-106.07 -106.07 A150 150 0 0 1 0 -150 Z" />
        <text x="-60" y="-100" fill="#fff" font-weight="bold" font-size="17" text-anchor="middle" transform="rotate(247.5 -60 -100)">üíµ FLAT ‚Çπ30 OFF</text>

        <path fill="#ffc107" d="M0 0 L0 -150 A150 150 0 0 1 106.07 -106.07 Z" />
        <text x="55" y="-100" fill="#333" font-weight="bold" font-size="17" text-anchor="middle" transform="rotate(292.5 55 -100)">üòì TRY AGAIN</text>

        <path fill="#8bc34a" d="M0 0 L106.07 -106.07 A150 150 0 0 1 150 0 Z" />
        <text x="105" y="-40" fill="#fff" font-weight="bold" font-size="17" text-anchor="middle" transform="rotate(337.5 105 -40)">üéß FREE EARPHONES</text>
      </g>
    </svg>
    <div class="center-button" id="spinBtn">SPIN</div>
  </div>

  <!-- Popup -->
  <div id="popup" class="popup" role="dialog" aria-modal="true" aria-labelledby="popupText">
    <img src="logo.jpg" alt="Bandeali Enterprises Logo" class="popup-logo"/>
    <div id="popupText" class="popup-text"></div>
    <button id="closeBtn" aria-label="Close popup">OK</button>
    <canvas id="fireworksCanvas"></canvas>
  </div>

  <script>
    // Particle background
    (function(){
      const count = window.innerWidth < 600 ? 20 : 40;
      for(let i=0; i<count; i++){
        const p = document.createElement('div');
        p.className = 'particle';
        const size = Math.random() * 8 + 4;
        p.style.width = p.style.height = size + 'px';
        p.style.left = Math.random() * 96 + 'vw';
        p.style.top = '-10vh';
        p.style.animationDuration = (5 + Math.random() * 7) + 's';
        p.style.animationDelay = (Math.random() * 12) + 's';
        document.getElementById('particles').appendChild(p);
      }
    })();

    const wheel = document.getElementById('wheel');
    const spinButton = document.getElementById('spinBtn');
    const popup = document.getElementById('popup');
    const popupText = document.getElementById('popupText');
    const closeButton = document.getElementById('closeBtn');
    const fireworksCanvas = document.getElementById('fireworksCanvas');
    const ctx = fireworksCanvas.getContext('2d');

    let spinning = false;
    let deg = 0;

    function resizeCanvas(){
      fireworksCanvas.width = window.innerWidth;
      fireworksCanvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resizeCanvas);

    function spin(){
      if(spinning) return;
      spinning = true;
      const extraSpins = 6;
      const randomDegree = Math.floor(Math.random() * 360);
      deg = 360 * extraSpins + randomDegree;
      wheel.style.transition = 'transform 5s cubic-bezier(0.19, 0.75, 0.54, 0.99)';
      wheel.style.transform = `rotate(${deg}deg)`;
      setTimeout(() => {
        spinning = false;
        const result = getResult(randomDegree);
        showPopup(result);
        launchFireworks();
      }, 5200);
    }

    function getResult(angle){
      angle = angle % 360;
      // 0-45 -> 1st, 45-90 2nd etc (clockwise)
      if(angle >= 0 && angle < 45) return "üî• 10% OFF (upto ‚Çπ100)";
      if(angle >= 45 && angle < 90) return "üòî TRY AGAIN";
      if(angle >= 90 && angle < 135) return "üéÅ 15% OFF (upto ‚Çπ150)";
      if(angle >= 135 && angle < 180) return "üí∏ FLAT ‚Çπ20 OFF";
      if(angle >= 180 && angle < 225) return "üéâ 20% OFF (upto ‚Çπ200)";
      if(angle >= 225 && angle < 270) return "üíµ FLAT ‚Çπ30 OFF";
      if(angle >= 270 && angle < 315) return "üòì TRY AGAIN";
      if(angle >= 315 && angle < 360) return "üéß FREE EARPHONES";
      return "Try Again";
    }

    function showPopup(text){
      popupText.innerHTML = "üéâ Congratulations!<br>" + text;
      popup.style.display = "flex";
      resizeCanvas();
    }

    function closePopup(){
      popup.style.display = "none";
      fireworksObjs = [];
      if(fireworksInterval) clearInterval(fireworksInterval);
      ctx.clearRect(0, 0, fireworksCanvas.width, fireworksCanvas.height);
      wheel.style.transition = 'none';
      wheel.style.transform = 'rotate(0deg)';
    }

    spinButton.addEventListener('click', spin);
    spinButton.addEventListener('touchstart', spin);
    closeButton.addEventListener('click', closePopup);
    closeButton.addEventListener('touchstart', closePopup);

    // Fireworks animation adapted from previous code
    let fireworksInterval = null, fireworksObjs = [];

    function Firework(){
      this.x = fireworksCanvas.width * (0.15 + 0.7 * Math.random());
      this.y = fireworksCanvas.height;
      this.targetY = fireworksCanvas.height * (0.3 + 0.55 * Math.random());
      this.color = `hsl(${Math.random()*360},100%,50%)`;
      this.particles = [];
      this.exploded = false;
      this.launchVY = -7 - Math.random()*2;
      this.vy = this.launchVY;
    }
    Firework.prototype.update = function() {
      if(!this.exploded){
        this.y += this.vy;
        this.vy += 0.13;
        if(this.y <= this.targetY){
          this.exploded = true;
          for(let i=0; i < 40 + Math.random()*28; i++){
            const angle = (Math.PI * 2 * i) / 60;
            this.particles.push({
              x: this.x,
              y: this.y,
              vx: Math.cos(angle) * (2 + Math.random()*2.8),
              vy: Math.sin(angle) * (2 + Math.random()*2.8),
              alpha: 1,
              color: this.color
            });
          }
        }
      } else {
        this.particles.forEach(p=>{
          p.x += p.vx;
          p.y += p.vy;
          p.vy += 0.05;
          p.alpha -= 0.013 + Math.random()*0.008;
        });
        this.particles = this.particles.filter(p=>p.alpha > 0);
      }
    }
    Firework.prototype.draw = function(ctx) {
      if(!this.exploded){
        ctx.beginPath();
        ctx.arc(this.x,this.y,3,0,Math.PI*2);
        ctx.fillStyle = "#fff";
        ctx.fill();
      } else {
        this.particles.forEach(p=>{
          ctx.globalAlpha = p.alpha;
          ctx.fillStyle = p.color;
          ctx.beginPath();
          ctx.arc(p.x,p.y,2.6,0,Math.PI*2);
          ctx.fill();
          ctx.globalAlpha = 1;
        });
      }
    }

    function launchFireworks(){
      resizeCanvas();
      fireworksObjs = [];
      if(fireworksInterval) clearInterval(fireworksInterval);
      fireworksInterval = setInterval(()=>{
        fireworksObjs.push(new Firework());
        if(fireworksObjs.length > 12) fireworksObjs.shift();
      }, 700);
      drawLoop();
    }

    function drawLoop(){
      ctx.clearRect(0,0,fireworksCanvas.width,fireworksCanvas.height);
      fireworksObjs.forEach(fw => {
        fw.update();
        fw.draw(ctx);
      });
      requestAnimationFrame(drawLoop);
    }
  </script>
</body>
</html>
